<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>منيو المطعم</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Amiri&display=swap');

body { margin:0; font-family:'Amiri', serif; background:linear-gradient(to bottom,#87ceeb,#00bfff); text-align:center;}
.section{margin:20px; padding:30px; background:#ffa500; border-radius:20px; font-size:32px; font-weight:bold; cursor:pointer; transition:0.3s;}
.section:hover{transform:scale(1.05);}
.menu, #order-screen, #final-order-screen, #daily-orders{display:none; padding:20px;}
.menu button, #add-to-cart-btn, #send-order-btn, .back-btn, #erase-btn{display:block; width:80%; margin:10px auto; padding:15px; font-size:22px; border-radius:10px; border:none; cursor:pointer; font-weight:bold;}
.menu button{background:#ffa500; color:black;}
#add-to-cart-btn{background:#00bfff; color:white;}
#send-order-btn{background:#32cd32; color:white;}
.back-btn{background:#ffa500; color:black; font-size:24px;}
#erase-btn{background:red; color:white;}
table{width:90%; margin:10px auto; border-collapse:collapse; font-size:20px;}
th, td{border:1px solid #000; padding:10px;}
th{background:#ffa500;}
</style>
</head>
<body>

<div id="home">
    <div class="section" onclick="openMenu('layali')">منيو مطعم ليالي الفرات</div>
    <div class="section" onclick="openMenu('sabirawi')">منيو مطعم الصبيراوي</div>
    <button class="section" onclick="askPassword()">عرض الطلبات اليومية</button>
</div>

<div id="layali-menu" class="menu"></div>
<div id="sabirawi-menu" class="menu"></div>

<div id="order-screen">
    <h2 id="order-title"></h2>
    <p id="order-price"></p>
    <label>الكمية: <input type="number" id="order-quantity" value="1" min="1"></label><br>
    <button id="add-to-cart-btn">أضف للسلة</button>
    <button class="back-btn" onclick="backToMenu()">رجوع</button>
</div>

<div id="final-order-screen">
    <h2>طلبك النهائي</h2>
    <table>
        <thead><tr><th>الطلب</th><th>السعر</th><th>الكمية</th><th>المجموع</th></tr></thead>
        <tbody id="final-orders-body"></tbody>
    </table>
    <h3 id="total-final"></h3>
    <button id="send-order-btn" onclick="sendOrder()">أرسل الطلب النهائي</button>
    <button class="back-btn" onclick="backToHomeFromFinal()">رجوع</button>
</div>

<div id="daily-orders">
    <h2>الطلبات اليومية</h2>
    <table>
        <thead><tr><th>الطلب</th><th>السعر</th><th>الكمية</th><th>المجموع</th></tr></thead>
        <tbody id="orders-table-body"></tbody>
    </table>
    <h3 id="total-income"></h3>
    <button id="erase-btn" onclick="eraseOrders()">مسح الطلبات</button>
    <button class="back-btn" onclick="backToHomeFromOrders()">رجوع</button>
</div>

<script>
const layaliItems=[
{name:'سمك مسكوف', price:15000},
{name:'صينية مندي لحم', price:16000},
{name:'نفر مندي لحم', price:8000},
{name:'دجاجة مندي صينيتين', price:20000},
{name:'صينية نص دجاجة مندي', price:10000},
{name:'نفر مندي دجاج', price:5000},
{name:'كيلو كباب', price:20000},
{name:'نص كيلو كباب', price:10000},
{name:'نفر كباب', price:5000},
{name:'نص نفر كباب', price:3500},
];

const sabirawiItems=[
{name:'بيتزا كبير', price:8000},
{name:'بيتزا وسط', price:6000},
{name:'بيتزا صغير', price:3000},
{name:'بركر دبل', price:2000},
{name:'بركر عادي', price:1000},
{name:'صاج دجاج', price:2000},
{name:'صاج فلافل', price:1000},
{name:'وجبة صاج دجاج', price:3000},
{name:'وجبة صاج فلافل', price:2000},
{name:'وجبة كنتاكي', price:7000},
{name:'نص وجبة كنتاكي', price:3500},
{name:'ريزو', price:3000},
{name:'لفة كص دجاج', price:1000},
];

let currentMenu=[];
let finalOrder=[];
let orders=JSON.parse(localStorage.getItem('orders'))||[];

function openMenu(menu){
    document.getElementById('home').style.display='none';
    currentMenu=menu==='layali'? layaliItems : sabirawiItems;
    const menuDiv=menu==='layali'? document.getElementById('layali-menu'):document.getElementById('sabirawi-menu');
    menuDiv.innerHTML='<button class="back-btn" onclick="backToHome()">رجوع</button>';
    currentMenu.forEach(item=>{
        const btn=document.createElement('button');
        btn.textContent=item.name;
        btn.onclick=()=>showOrder(item);
        menuDiv.appendChild(btn);
    });
    menuDiv.style.display='block';
}

function showOrder(item){
    document.getElementById('layali-menu').style.display='none';
    document.getElementById('sabirawi-menu').style.display='none';
    document.getElementById('order-screen').style.display='block';
    document.getElementById('order-title').textContent=item.name;
    document.getElementById('order-price').textContent='السعر: '+item.price+' دينار';
    document.getElementById('order-quantity').value=1;

    document.getElementById('add-to-cart-btn').onclick=()=>{
        const qty=parseInt(document.getElementById('order-quantity').value);
        const total=item.price*qty;
        finalOrder.push({name:item.name, price:item.price, qty:qty, total:total});
        alert(`${item.name} تمت إضافته للسلة`);
        showFinalOrder(); // تعرض الطلب النهائي بعد كل إضافة
    };
}

function backToMenu(){
    document.getElementById('order-screen').style.display='none';
    if(currentMenu===layaliItems){ document.getElementById('layali-menu').style.display='block'; }
    else{ document.getElementById('sabirawi-menu').style.display='block'; }
}

function backToHome(){
    document.getElementById('layali-menu').style.display='none';
    document.getElementById('sabirawi-menu').style.display='none';
    document.getElementById('order-screen').style.display='none';
    document.getElementById('final-order-screen').style.display='none';
    document.getElementById('home').style.display='block';
}

function showFinalOrder(){
    document.getElementById('order-screen').style.display='none';
    document.getElementById('layali-menu').style.display='none';
    document.getElementById('sabirawi-menu').style.display='none';
    const tbody=document.getElementById('final-orders-body');
    tbody.innerHTML='';
    let total=0;
    finalOrder.forEach(o=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${o.name}</td><td>${o.price}</td><td>${o.qty}</td><td>${o.total}</td>`;
        tbody.appendChild(tr);
        total+=o.total;
    });
    document.getElementById('total-final').textContent='المجموع الكلي: '+total+' دينار';
    document.getElementById('final-order-screen').style.display='block';
}

function sendOrder(){
    if(finalOrder.length===0){ alert("لا يوجد طلبات"); return; }
    let message='';
    finalOrder.forEach(o=>{ message+=`${o.name} x${o.qty} = ${o.total} دينار\n`; });
    const url=`https://wa.me/+9647885699227?text=${encodeURIComponent(message)}`;
    window.open(url,'_blank');
    finalOrder=[];
    backToHome();
}

function askPassword(){
    const pass=prompt("أدخل الرمز السري:");
    if(pass==='098123'){ showDailyOrders(); }
    else{ alert("رمز خاطئ!"); }
}

function showDailyOrders(){
    document.getElementById('home').style.display='none';
    document.getElementById('layali-menu').style.display='none';
    document.getElementById('sabirawi-menu').style.display='none';
    document.getElementById('order-screen').style.display='none';
    document.getElementById('final-order-screen').style.display='none';
    document.getElementById('daily-orders').style.display='block';

    const tbody=document.getElementById('orders-table-body');
    tbody.innerHTML='';
    let totalIncome=0;
    orders.forEach(o=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${o.name}</td><td>${o.price}</td><td>${o.qty}</td><td>${o.total}</td>`;
        tbody.appendChild(tr);
        totalIncome+=o.total;
    });
    document.getElementById('total-income').textContent='المجموع الكلي: '+totalIncome+' دينار';
}

function eraseOrders(){
    if(confirm("هل تريد مسح كل الطلبات؟")){
        orders=[];
        localStorage.removeItem('orders');
        showDailyOrders();
    }
}

function backToHomeFromOrders(){ document.getElementById('daily-orders').style.display='none'; backToHome(); }
function backToHomeFromFinal(){ document.getElementById('final-order-screen').style.display='none'; backToHome(); }

</script>
</body>
</html>